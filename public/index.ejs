<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Include ejs head.ejs from file-->
    <%- include('./head.ejs'); %>
    <title>DogsHome | Inicio</title>
    <meta name="description" content="Adoptá y ayudá a los perros que más lo nececitan con DogsHome. DogsHome es un sitio de adopción de perros online,
                                      con algunas funcionalidades extras, como localizar perros perdidos, reportar perros perdidos, area de noticias,
                                      y mucho más. Visitá DogsHome para enterarte de todo." data-head-react="true">


    <meta property="og:title" content="DogsHome | Inicio"/>
    <meta property="og:url" content="https://dogshome.com.ar"/>
    <meta property="og:description" content="DogsHome, adoptá ya">
    <meta property="og:image" content="https://dogshome.com.ar/profile/image/uploaded/dogshomelogo.jpg">
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="es_ES" />
    
    <script src="/scripts/main/basic-navigation.js"></script>
    <script src="/scripts/auth/sign-out.js"></script>
    <%- include('./stylesheets/main/style-mainpage.ejs'); %>
    <%- include('./stylesheets/main/content-show.ejs'); %>
    <%- include('./stylesheets/main/drawer-navigator-style.ejs'); %>
    <link rel="icon" href="/images/DogsHomeLogo-ReDesign%20(Colorified&Final).png">
    <script src="/scripts/main/loading-display.js"></script>

</head>

<body>
    <div id="loading-visible">
        <lottie-player src="/animations/dog-walking.json" background="transparent" speed="1"
            style="width: 200px; height: 200px;" loop autoplay></lottie-player>
    </div>
    <section id="main">
        <section id="drawer-navigator-dim" class="dim-null">
            <section id="drawer-navigator" class="drawer-closed" style="z-index: 100">

            </section>
            <section onclick="drawerAction()" style="width: 25%; height: 100%; position: absolute; top: 0; right: 0">
            </section>
        </section>

        <div id="search-bar">
            <div class="top-bar-section-cont" style="flex-direction: row; align-items: center;">
                <img loading="lazy" src="/images/DogsHomeLogo-ReDesign%20(White&Final).png" alt="Dogshome logo"
                    style="height: 50px; width: 50px; margin-right: 10px">

                <a id="alerts-button" class="desktop-elements nav-buttons" onclick="navigateToAlerts()">Alertas</a>
                <!-- <a id="refugios-button" class="desktop-elements nav-buttons" onclick="navigateToRefs()">Refugios</a>-->
            </div>
            <div class="top-bar-section-cont">
                <form id="search-form">
                    <div id="search-input-container"
                        style="width: 100%; height: 100%; max-width: 600px; flex-direction: row; display: flex; align-items: center; justify-content: center; background-color: white">
                        <input type="text" id="search-input" aria-label="Buscar" placeholder="Buscar en DogsHome…"
                            maxlength="120" autocapitalize="off" autocorrect="off" spellcheck="false" autocomplete="off"
                            tabindex="3">
                        <span class="material-icons-outlined" style="color: #d3d3d3; cursor: pointer; user-select: none"
                            onclick="searchPost()">search</span>
                    </div>
                </form>
            </div>
            <div class="top-bar-section-cont" id="userSpace"
                style="flex: 1; align-items: center; justify-content: flex-end;">
                <span class="material-icons-outlined" id="fav-button"
                    style="color: #fff; cursor: pointer; margin: 0 10px; user-select: none;"
                    onclick="expandMenu()">menu</span>
                <a class="desktop-elements nav-buttons" id="profile-name" style="margin-right: 0; padding-right: 10px"
                    onclick="navigateToProfile()"></a>
                <% if (isPrivate) {%>
                    <img loading="lazy" class="desktop-elements" id="profile-pic" onclick="window.location.href = '/signin'" src=<%=photoUrl %>
                    alt="profile pic" style="height: 40px; width: 40px; cursor: pointer; margin-right: 10px; user-select:
                    none; border-radius: 80px; object-fit: cover">
                <% } else { %>
                    <img loading="lazy" class="desktop-elements" id="profile-pic" onclick="window.location.href = '/perfil/<%= uid %>'" src=<%=photoUrl %>
                    alt="profile pic" style="height: 40px; width: 40px; cursor: pointer; margin-right: 10px; user-select:
                    none; border-radius: 80px; object-fit: cover">
                <% } %>   
                
            </div>
        </div>
        <%- include("./expandable-menu.ejs") %> 
        <section id="content">
            <section id="content-show">
                <% publications.forEach(function(post){%>
                    <div class="publication"
                        onclick="{let uid = '<%= post[0].Id %>'; window.location = '/publicacion/' + uid}">
                        <img loading="lazy" src=<%=post[0].Photo %> alt class="publication-photo">
                        <div class="publication-desc-cont">
                            <h1 class="publication-name">
                                <%= post[0].Name %>
                            </h1>
                            <p class="publication-description">
                                <%= post[0].SDescription %>
                            </p>
                        </div>
                        <div class="ref-name-cont">
                            <a>
                                <%= post[0].Refugio %>
                            </a>
                        </div>
                    </div>
                <%});%>
            </section>
        </section>
        <img src=<%=photoUrl %> alt id="profile-image-mobile" style="display: none !important;">
    </section>

    <!--Firebase Scripts -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-auth.js"></script>
    <script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-database.js"></script>
    <script src="https://dogshome-6af88.web.app/__/firebase/init.js"></script>
    <script src="https://dogshome-6af88.web.app/__/firebase/8.8.0/firebase-app-check.js"></script>

    <script src="/scripts/auth/sign-out.js"></script>
    <script src="/scripts/main/open-close-drawer.js"></script>
    <script src="/scripts/publications/expand-menu.js"></script>
    <script>
        var width;
        window.onresize = function () {
            width = this.innerWidth;
            if (width > 1024) {
                document.getElementById("expandible-menu").className = 'expandible-menu-invisible';
            }
        }
        window.onload = () => {
            setLoading(false)
        }
    </script>
    <% if (isPrivate) { %> 
        <%- include('./login-notification.ejs') %>
    <% } %> 
</body>

</html>