<!DOCTYPE html>
<html lang="es">
<head>
    <% var rootPath = './' %> 
    <%- include(rootPath + 'head.ejs'); %>
    <%- include(rootPath + 'ejs-resources/publication/publication_style.ejs'); %>
    <%- include(rootPath + 'ejs-resources/publication/publication_slider_style.ejs'); %>

    <title>DogsHome | <%= String(name).charAt(0).toUpperCase() + String(name).slice(1) %></title>
    <link rel="icon" href="/images/DogsHomeLogo-ReDesign%20(Colorified&Final).png">

    <meta property="og:title" content="Dogshome | <%= String(name).charAt(0).toUpperCase() + String(name).slice(1) %>">
    <meta property="og:url" content="https://dogshome.com.ar/publicacion/<%= pubId %>"/>
    <meta property="og:description" content="<%= description %>">
    <meta property="og:image" content="<%= "https://dogshome.com.ar" + String(photo) %> ">
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="es_ES" />

    <script src="/scripts/alerts/page-alerts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@3.6.9/dist/js/splide.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@3.6.9/dist/css/themes/splide-default.min.css">
</head>
<body>

    <%- include(rootPath + 'ejs-resources/search-bar/search-bar.ejs')%>

    <%- include(rootPath + 'ejs-resources/menu-mobile/expandable-menu.ejs') %> 
    <div id="all-container">
        <div id="post">
            <div style="flex-direction: row; display: flex; width: 100%; height: 100%">
                <div id="post-images-selector">
                    <div class="secondary-image-cont-selected" id="primary-image-cont-min" onclick="onSecondaryImageClick(this.id)">
                        <img src="<%= photo %> " alt class="secondary-image" id="primary-image-min">
                    </div>
                    <% secPhotos.forEach(function(photo) { %>
                        <div class="secondary-image-cont-unselected" id="secondary-image<%= secPhotos.indexOf(photo) %>" onclick="onSecondaryImageClick(this.id)">
                            <img src="<%= photo %>" alt class="secondary-image">
                        </div>
                    <% }) %>
                </div>
                <div id="left-post">
                    <div id="post-image-container">
                        <img id="post-image" src="<%= photo %> " alt>
                        <!--Creates the slider-->
                        <div id="splide-slider-wrapper">
                            <div id="main-wrapper">
                                <div class="splide" id="splide-slider-main">
                                    <div class="splide__track">
                                        <ul class="splide__list">
                                            <% allPhotos.forEach(function(photo){%>
                                                <li class="splide__slide">
                                                    <img src="<%= photo %> " class="main-slider-image" alt>
                                                </li>
                                            <%});%>
                                        </ul>
                                    </div>
                                  </div>
                            </div>
                            <div id="thumbnail-wrapper">
                                <div class="splide" id="splide-slider">
                                    <div class="splide__track">
                                        <ul class="splide__list">
                                            <% allPhotos.forEach(function(photo){%>
                                                <li class="splide__slide">
                                                    <img src="<%= photo %>" alt>
                                                </li>
                                            <%});%>
                                        </ul>
                                    </div>
                                  </div>
                            </div>
                        </div>
                        <div id="publication-content-mobile" class="mobile">
                            <div class="post-name-mobile-container">
                                <a id="post-name-mobile"><%= name %></a>
                                <a id="post-shelter-name" onclick="window.location = '/perfil/<%= refId %>'"><%= ShelterName %></a>
                            </div>
                            <div id="publication-description-mobile" class="mobile">
                                <a style="font-weight: bolder; color: rgba(0, 0, 0, 0.75); margin-bottom: 10px;">Descripción</a>
                                <p id="publication-description-text-mobile"><%= description %></p>
                            </div>
                            <div class="post-details-mobile mobile">
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Castrado: </a>
                                    <a class="detail-prop"><%- castrated ? 'Sí' : 'No'%></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Amigable con gatos: </a>
                                    <a class="detail-prop"><%- catfriendly ? 'Sí' : 'No'%></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Amigable con perros: </a>
                                    <a class="detail-prop"><%- dogfriendly ? 'Sí' : 'No'%></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Amigable con niños: </a>
                                    <a class="detail-prop"><%- kidsfriendly ? 'Sí' : 'No'%></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Color: </a>
                                    <a class="detail-prop"><%= color %></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Tamaño: </a>
                                    <a class="detail-prop"><%= size %></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Edad (Años): </a>
                                    <a class="detail-prop"><%= ageInYears %></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Edad (Meses): </a>
                                    <a class="detail-prop"><%= ageInMonths %></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Raza: </a>
                                    <a class="detail-prop"><%= breed %></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Vacunado: </a>
                                    <a class="detail-prop"><%- vaccinated ? 'Sí' : 'No'%></a>
                                </div>
                                <div class="detail-cont">
                                    <a class="detail-name-mobile">Desparasitado: </a>
                                    <a class="detail-prop"><%- dewormed ? 'Sí' : 'No'%></a>
                                </div>
                            </div>
                            <% if(shelterPubs.length > 0) {%>
                                <div id="more-shelter-publications-mobile">
                                    <h1 style="font-family: 'Lato', sans-serif; font-weight: bolder; font-size: 14pt; color: rgba(0, 0, 0, 0.75);">Mas publicaciones de <a href="/perfil/<%= refId %> " style="color: #079292; text-decoration: none;"><%= ShelterName %></a></h1>
                                    <div class="shelter-publications-container">
                                        <% shelterPubs.forEach(function(post){%>
                                            <div class="publication"
                                                onclick="{let uid = '<%= post.Id %>'; window.location = '/publicacion/' + uid}">
                                                <img src=<%=post.Photo %> alt class="publication-photo">
                                                <div class="publication-desc-cont">
                                                    <h1 class="publication-name">
                                                        <%= post.Name %>
                                                    </h1>
                                                    <p class="publication-description">
                                                        <%= post.SDescription %>
                                                    </p>
                                                </div>
                                                <div class="ref-name-cont">
                                                    <a>
                                                        <%= post.Refugio %>
                                                    </a>
                                                </div>
                                            </div>
                                        <%});%>
                                    </div>
                                </div>
                            <%}%>
                        </div>
                    </div>
                    <div id="secondary-images-container-mobile">
                        <% secPhotos.forEach(function(photo) { %>
                            <div class="secondary-image-cont-unselected" id="secondary-image-mobile<%= secPhotos.indexOf(photo) %>" onclick="onSecondaryImageClick(this.id)">
                                <img src="<%= photo %>" alt class="secondary-image">
                            </div>
                        <% }) %>
                    </div>
                </div>
            </div>

            <div id="right-post">
                <div id="publication-details">
                    <div style="width: auto; height:fit-content; display:flex; flex-direction:row; align-items:flex-end; justify-content: center">
                        <a id="post-name-mobile"><%= name %></a>
                        <a></a>
                        <a id="post-shelter-name" onclick="window.location = '/perfil/<%= refId %>'"> <%= ShelterName %></a>
                    </div>
                    <div class="post-details">
                        <div class="detail-cont">
                            <a class="detail-name">Castrado: </a>
                            <a class="detail-prop"><%- castrated ? 'Sí' : 'No'%></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Amigable con gatos: </a>
                            <a class="detail-prop"><%- catfriendly ? 'Sí' : 'No'%></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Amigable con perros: </a>
                            <a class="detail-prop"><%- dogfriendly ? 'Sí' : 'No'%></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Amigable con niños: </a>
                            <a class="detail-prop"><%- kidsfriendly ? 'Sí' : 'No'%></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Color: </a>
                            <a class="detail-prop"><%= color %></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Tamaño: </a>
                            <a class="detail-prop"><%= size %></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Edad (Años): </a>
                            <a class="detail-prop"><%= ageInYears %></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Edad (Meses): </a>
                            <a class="detail-prop"><%= ageInMonths %></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Raza: </a>
                            <a class="detail-prop"><%= breed %></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Vacunado: </a>
                            <a class="detail-prop"><%- vaccinated ? 'Sí' : 'No'%></a>
                        </div>
                        <div class="detail-cont">
                            <a class="detail-name">Desparasitado: </a>
                            <a class="detail-prop"><%- dewormed ? 'Sí' : 'No'%></a>
                        </div>
                    </div>
                </div>
                <div id="publication-actions">
                    <a class="action-button-circle" id="share-btn" onclick="share()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path fill-rule="evenodd" d="M20 5.5a3.5 3.5 0 01-6.062 2.385l-5.112 3.021a3.497 3.497 0 010 2.188l5.112 3.021a3.5 3.5 0 11-.764 1.29l-5.112-3.02a3.5 3.5 0 110-4.77l5.112-3.021v.001A3.5 3.5 0 1120 5.5zm-1.5 0a2 2 0 11-4 0 2 2 0 014 0zM5.5 14a2 2 0 100-4 2 2 0 000 4zm13 4.5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    </a>
                    <a class="action-button-circle" id="favorite-btn" onclick="saveFavorite('<%= pubId %>')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="m12 20.703.343.667a.748.748 0 0 1-.686 0l-.003-.002-.007-.003-.025-.013a31.138 31.138 0 0 1-5.233-3.576C3.8 15.573 1 12.332 1 8.514v-.001C1 5.053 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262a31.148 31.148 0 0 1-5.233 3.576l-.025.013-.007.003-.002.001ZM6.736 4C4.657 4 2.5 5.88 2.5 8.514c0 3.107 2.324 5.96 4.861 8.12a29.655 29.655 0 0 0 4.566 3.175l.073.041.073-.04c.271-.153.661-.38 1.13-.674.94-.588 2.19-1.441 3.436-2.502 2.537-2.16 4.861-5.013 4.861-8.12C21.5 5.88 19.343 4 17.264 4c-2.106 0-3.801 1.389-4.553 3.643a.751.751 0 0 1-1.422 0C10.537 5.389 8.841 4 6.736 4Z"></path></svg>
                        <div id="favorite-loader-container" class="btn-loader-container">
                            <div class="loader-4 btn-loading" id="favorite-loading"><span></span></div>
                        </div>
                    </a>
                    <a class="action-button-circle hide invert" id="unfavorite-btn" onclick="deleteFavorite('<%= pubId %>')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M14 20.408c-.492.308-.903.546-1.192.709-.153.086-.308.17-.463.252h-.002a.75.75 0 0 1-.686 0 16.709 16.709 0 0 1-.465-.252 31.147 31.147 0 0 1-4.803-3.34C3.8 15.572 1 12.331 1 8.513 1 5.052 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262A31.146 31.146 0 0 1 14 20.408Z"></path></svg>
                        <div id="unfavorite-loader-container" class="btn-loader-container invert">
                            <div class="loader-4 btn-loading invert" id="favorite-loading"><span></span></div>
                        </div>
                    </a>
                    <a class="action-button-circle" onclick="startNewChat('<%= pubId %>', '<%= refId %>')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20"><path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"></path><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"></path></svg>
                        <div id="chat-loader-container" class="btn-loader-container">
                            <div class="loader-4 btn-loading" id="chat-loading"><span></span></div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div id="description-container">
            <a style=" margin-left: 60px; font-weight: bolder; color: rgba(0, 0, 0, 0.75); margin-bottom: 10px;">Descripción</a>
            <p id="description"><%= description %> </p>
        </div>
        <% if(shelterPubs.length > 0) {%>
            <div id="more-shelter-publications">
                <h1 style="font-family: 'Lato', sans-serif; font-weight: bolder; font-size: 14pt; color: rgba(0, 0, 0, 0.75);">Mas publicaciones de <a href="/perfil/<%= refId %> " style="color: #079292; text-decoration: none;"><%= ShelterName %></a></h1>
                <div class="shelter-publications-container">
                    <% shelterPubs.forEach(function(post){%>
                        <div class="publication"
                            onclick="{let uid = '<%= post.Id %>'; window.location = '/publicacion/' + uid}">
                            <img src=<%=post.Photo %> alt class="publication-photo">
                            <div class="publication-desc-cont">
                                <h1 class="publication-name">
                                    <%= post.Name %>
                                </h1>
                                <p class="publication-description">
                                    <%= post.SDescription %>
                                </p>
                            </div>
                            <div class="ref-name-cont">
                                <a>
                                    <%= post.Refugio %>
                                </a>
                            </div>
                        </div>
                    <%});%>
                </div>
            </div>
        <%}%>
    </div>

    <script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://dogshome-6af88.web.app/__/firebase/8.6.5/firebase-auth.js"></script>
    <script src="https://dogshome-6af88.web.app/__/firebase/init.js"></script>

    <script src="/scripts/auth/sign-out.js"></script>

    
    <% if (isPrivate) { %> 
        <%- include('./login-notification.ejs') %>
    <% } %> 
</body>
</html>